{% extends "jobs/pages/base.html" %}
{% block content %}

<div class="container">
    <div class="row page-title">
        <h1><a href="{% url 'jobs:index' center %}">{{ job }}</a></h1>
    </div>
    <div class="row messages-block">
        {% if messages %}
            <ul class="messages list-unstyled danger">
                    {% for message in messages %}
                        <li class="danger">{{ message }}</li>
                    {% endfor %}
            </ul>
        {% endif %}
    </div>

    <br />
    <div class="row">
        <div class="col-sm-12 instructions"
            <p>Date Created:&emsp;&emsp; {{ job.jmocreateddate }}</p>
            {% for field in fields %}
                {% if field.is_a_meta_field == True and field.field_name == "template_set"  %}
                    <p>Template In Use:&emsp;&emsp;{{ field.field_text }}</p><br />
                {% endif %}
            {% endfor %}

            <strong>JOB INSTRUCTIONS:&emsp;</strong>
            {% if job_instructions %}
                {% for memo in job_instructions %}
                    {{ memo.instructions }}
                {% endfor %}
            {% endif %}
            <br /><br />
            <strong>ASSEMBLY INSTRUCTIONS:&emsp;</strong>
            {% if assembly_instructions %}
                {% for memo in assembly_instructions %}
                    {{ memo.instructions }}
                {% endfor %}
            {% endif %}
            <br /><br />
            <strong>OPERATION INSTRUCTIONS:&emsp;</strong>
            {% if job.jmosfemessagetext %}
                    {{ job.jmoprocesslongdescriptiontext }}
            {% endif %}
            <br /><br />
        </div>
    </div>

<form action="{% url 'jobs:data_view' center urluniqueid %}" name="data_view">
    <input type="submit" name="data_view" value="View Job Data From Other Work Centers" id="data_view"/>
</form>

<p>&emsp;</p>
<p>&emsp;</p>

<div id="fields">
{% for reopen_iterator in reopen_number %}
    {% for field in fields %}
        {% ifequal field.submission_number reopen_iterator|slugify %}
            {% ifnotequal field.field_has_been_set False %}
                {% ifnotequal field.editing_mode True %}
                    {% include 'jobs/forms/saved_field_form.html' %}
                {% else %}
                    {% include 'jobs/forms/existing_field_form.html' %}
                {% endifnotequal %}
            {% else %}
                {% include 'jobs/forms/new_field_form.html' %}
            {% endifnotequal %}
        {% endifequal %}
    {% endfor %}
    <hr>
{% endfor %}

{% for field in metafields %}
    {% ifequal field.field_name "submitted" %}
        {% ifequal field.field_text "false" %}
            <form action="{% url 'jobs:add_field' center urluniqueid %}" method="post" name="add_field">
                {% csrf_token %}
                <input type="submit" name="add_field" value="Add Field" id="add_field"/>
            </form>
            {% include 'jobs/forms/submit.html' %}
        {% else %}
            {% include 'jobs/forms/reopen.html' %}
        {% endifequal %}
    {% endifequal %}
{% endfor %}
<br /><br /><br /><br />
</div>

<!-- SCROLL SNEAK JS: you can change `location.hostname` to any unique string or leave it as is -->
<script>
(function() {
    var sneaky = new ScrollSneak(location.hostname), tabs = document.getElementById('fields').getElementsByTagName('form'), i = 0, len = tabs.length;
    for (; i < len; i++) {
        tabs[i].onclick = sneaky.sneak;
    }

    document.getElementByTagName('input').onclick = sneaky.sneak;
})();
</script>
<!-- END OF SCROLL SNEAK JS -->
</div>
{% endblock %}
